{% extends "base.html" %}
{% block content %}
{% include "flash_errors.html" %}
<ul>
    <div class="container my-3">
        <a href="{{ url_for('file.refresh')}}" class="btn btn-sm btn-outline-primary my-3">새로고침</a>
        <table class="table">
            <thead>
            <tr class="table-dark">
                <th>번호</th>
                <th>제목</th>
                <th class="col-sm-2">파일 크기(KB)</th>
                <th class="col-sm-2">공개 여부</th>
            </tr>
            </thead>
            <tbody>
            {% if file_list.count %}
            {% for file in file_list %}
            <tr>
                <td>{{ loop.index }}</td>
                <td>
                    <a href="{{ url_for('file.down', file_id = file.id) }}" target="_blank">{{ file.filename }}</a>
                </td>
                <td>
                    {{'%0.2f'|format(file.size|float)}}KB
                </td>
                <td>
                    {% if file.permission %}
                    <a href="{{ url_for('file._permission', file_id = file.id, permission = 0)}}" class="btn btn-sm btn-outline-primary">공개하기</a>
                    {% else %}
                    <a href="{{ url_for('file._permission', file_id = file.id, permission = 1)}}" class="btn btn-sm btn-outline-primary">비공개하기</a>
                    {% endif %}
                </td>
            </tr>
            {% endfor %}
            {% else %}
            <tr>
                <td colspan="3">등록된 파일이 없습니다.</td>
            </tr>
            {% endif %}
            </tbody>
        </table>
    </div>
</ul>
{% endblock %}